# .bashrc AWS functions

# Add completion to aws
if type -p aws_completer >/dev/null ; then
  complete -C "$(type -p aws_completer)" aws
fi

# Finds the private IP of an ec2
function ec2-get-private-ip {
  for i in $* ; do
    aws ec2 describe-instances \
      --filters "Name=tag:Name,Values=$i" "Name=instance-state-name,Values=running" \
      --query "Reservations[*].Instances[*].{Instance:PrivateIpAddress}" --output text
  done
}

#
# shell aliases for AWS CLi aliases in ~/.aws/cli/alias
#
# Gets a SSM param string to STDOUT
alias ssmget="aws ssmget"

# Gets a secretsmanager secret string to STDOUT
alias smget="aws smget"

# List all SSM params by path
alias ssmls="aws ssmls"
